{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.makeApp = makeApp;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _history = require(\"history\");\n\nvar _app = _interopRequireDefault(require(\"./react-app/app\"));\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n/* \nTODOS\n- code organization?\n- re-rendering - unmount?\n- history location change - prevent unneeded rerenders and fix back button\n- load CSS styles\n*/\n\n\nfunction addFonts() {\n  var preconnect = document.createElement(\"link\");\n  preconnect.rel = \"preconnect\";\n  preconnect.href = \"https://fonts.gstatic.com\";\n  document.head.append(preconnect);\n  var fontLink = document.createElement(\"link\");\n  fontLink.href = \"https://fonts.googleapis.com/css2?family=Fira+Code&family=Lato:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap\";\n  fontLink.rel = \"stylesheet\";\n  document.head.append(fontLink);\n\n  if (window.frameElement) {\n    var style = document.createElement(\"style\");\n    style.innerHTML = \"body{margin:0;} #root{display:grid;place-items:center;height:100vh;}\";\n    document.head.append(style);\n  }\n}\n\nvar originalDocumentElement = document.documentElement;\n\nfunction makeApp(_ref) {\n  var imports = _ref.imports,\n      fileInfo = _ref.fileInfo,\n      projectTitle = _ref.projectTitle; // add fonts\n\n  addFonts(); // build navigation\n\n  var exercises = [];\n\n  var _iterator = _createForOfIteratorHelper(fileInfo),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var info = _step.value;\n      exercises[info.number] = exercises[info.number] || {};\n\n      if ([\"exercise\", \"readme\", \"solution\"].includes(info.type)) {\n        info.importFn = imports[info.id];\n\n        if (info.type === \"solution\") {\n          exercises[info.number][info.type] = exercises[info.number][info.type] || [];\n          exercises[info.number][info.type].push(info);\n        } else {\n          exercises[info.number][info.type] = info;\n        }\n      }\n    } // create history and listen for changes\n    // use this for the 'isolated' version of the site, which is useful for dev tools debugging\n\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var history = (0, _history.createBrowserHistory)();\n  var previousLocation = history.location;\n  history.listen(handleLocationChange);\n  handleLocationChange(); // when location changes, either run in 'isolated' mode or render the workshop app\n\n  function handleLocationChange() {\n    var _fileInfo$find;\n\n    var location = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : history.location;\n    var pathname = location.pathname;\n    if (!pathname) return;\n    var file;\n\n    if (pathname !== null && pathname !== void 0 && pathname.startsWith(\"/isolated\")) {\n      // render isolated component\n      var filePath = pathname.replace(\"/isolated\", \"src\");\n      file = fileInfo.find(function (f) {\n        return f.filePath === filePath;\n      });\n\n      if (file) {\n        renderIsolated(file);\n      }\n    } else {\n      var number = Number(pathname.split(\"/\").slice(-1)[0]);\n      file = fileInfo.find(function (f) {\n        return f.type === \"readme\" && f.number === number;\n      });\n      renderReact();\n    } // set title\n    // setTimeout(() => {\n\n\n    var title = (_fileInfo$find = fileInfo.find(function (f) {\n      var _file;\n\n      return f.number === ((_file = file) === null || _file === void 0 ? void 0 : _file.number) && f.type === \"readme\";\n    })) === null || _fileInfo$find === void 0 ? void 0 : _fileInfo$find.title;\n\n    if (file && title) {\n      var newTitle = \"\".concat(file.number, \". \").concat(title);\n\n      if (document.title !== newTitle) {\n        document.title = newTitle;\n      }\n    } // }, 100);\n\n\n    previousLocation = location;\n  } // this is actually gonna render every exercise and solution (in an iframe or in the window)\n\n\n  function renderIsolated(file) {\n    if (history.location !== previousLocation) return;\n    file.importFn().then( /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(module) {\n        var component, domParser, newDocument, scripts, _iterator2, _step2, script, newScript, _iterator3, _step3, _script$getAttribute, attrName;\n\n        return _regenerator.default.wrap(function (_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (typeof module.default === \"function\") {\n                  // React component\n                  component = /*#__PURE__*/_react.default.createElement(module.default);\n                  render(component);\n                } else if (typeof module.default === \"string\") {\n                  // HTML file\n                  domParser = new DOMParser();\n                  newDocument = domParser.parseFromString(module.default, \"text/html\");\n                  document.documentElement.replaceWith(newDocument.documentElement); // scripts need to be added manually so they'll actually run\n\n                  scripts = document.querySelectorAll(\"script\");\n                  _iterator2 = _createForOfIteratorHelper(scripts);\n\n                  try {\n                    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                      script = _step2.value;\n                      newScript = document.createElement(\"script\");\n                      _iterator3 = _createForOfIteratorHelper(script.getAttributeNames());\n\n                      try {\n                        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                          attrName = _step3.value; // if (attrName === \"src\") {\n                          //   // resolve path from src\n                          //   const something = await import(\"../solution/temp/test.js\");\n                          // } else {\n                          // }\n\n                          newScript.setAttribute(attrName, (_script$getAttribute = script.getAttribute(attrName)) !== null && _script$getAttribute !== void 0 ? _script$getAttribute : \"\");\n                        }\n                      } catch (err) {\n                        _iterator3.e(err);\n                      } finally {\n                        _iterator3.f();\n                      }\n\n                      newScript.innerHTML = script.innerHTML;\n                      script.parentNode.insertBefore(newScript, script);\n                      script.remove();\n                    }\n                  } catch (err) {\n                    _iterator2.e(err);\n                  } finally {\n                    _iterator2.f();\n                  }\n                }\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function () {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  }\n\n  function render(ui) {\n    var root = document.getElementById(\"root\");\n\n    _reactDom.default.unmountComponentAtNode(root);\n\n    _reactDom.default.render(ui, root);\n  }\n\n  function renderReact() {\n    if (document.documentElement !== originalDocumentElement) {\n      document.documentElement.replaceWith(originalDocumentElement);\n    }\n\n    _reactDom.default.render( /*#__PURE__*/_react.default.createElement(_app.default, {\n      exercises: exercises,\n      projectTitle: projectTitle\n    }), document.getElementById(\"root\"));\n  }\n}","map":{"version":3,"sources":["/Users/louis/Desktop/Lectures/repos/duplicates/SENG-LIVE-062821/Phase-2/06-side-effects-data-fetching/workshop-use-effect/node_modules/@ihollander/workshop-app/dist/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","makeApp","_regenerator","_asyncToGenerator2","_react","_reactDom","_history","_app","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","return","minLen","_arrayLikeToArray","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","addFonts","preconnect","document","createElement","rel","href","head","append","fontLink","window","frameElement","style","innerHTML","originalDocumentElement","documentElement","_ref","imports","fileInfo","projectTitle","exercises","_iterator","_step","info","number","includes","type","importFn","id","push","history","createBrowserHistory","previousLocation","location","listen","handleLocationChange","_fileInfo$find","arguments","undefined","pathname","file","startsWith","filePath","replace","find","renderIsolated","Number","split","renderReact","title","_file","newTitle","concat","then","_ref2","default","mark","_callee","module","component","domParser","newDocument","scripts","_iterator2","_step2","script","newScript","_iterator3","_step3","_script$getAttribute","attrName","wrap","_context","prev","render","DOMParser","parseFromString","replaceWith","querySelectorAll","getAttributeNames","setAttribute","getAttribute","parentNode","insertBefore","remove","stop","apply","ui","root","getElementById","unmountComponentAtNode"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.makeApp = makeApp;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _history = require(\"history\");\n\nvar _app = _interopRequireDefault(require(\"./react-app/app\"));\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/* \nTODOS\n- code organization?\n- re-rendering - unmount?\n- history location change - prevent unneeded rerenders and fix back button\n- load CSS styles\n*/\nfunction addFonts() {\n  var preconnect = document.createElement(\"link\");\n  preconnect.rel = \"preconnect\";\n  preconnect.href = \"https://fonts.gstatic.com\";\n  document.head.append(preconnect);\n  var fontLink = document.createElement(\"link\");\n  fontLink.href = \"https://fonts.googleapis.com/css2?family=Fira+Code&family=Lato:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap\";\n  fontLink.rel = \"stylesheet\";\n  document.head.append(fontLink);\n\n  if (window.frameElement) {\n    var style = document.createElement(\"style\");\n    style.innerHTML = \"body{margin:0;} #root{display:grid;place-items:center;height:100vh;}\";\n    document.head.append(style);\n  }\n}\n\nvar originalDocumentElement = document.documentElement;\n\nfunction makeApp(_ref) {\n  var imports = _ref.imports,\n      fileInfo = _ref.fileInfo,\n      projectTitle = _ref.projectTitle;\n  // add fonts\n  addFonts(); // build navigation\n\n  var exercises = [];\n\n  var _iterator = _createForOfIteratorHelper(fileInfo),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var info = _step.value;\n      exercises[info.number] = exercises[info.number] || {};\n\n      if ([\"exercise\", \"readme\", \"solution\"].includes(info.type)) {\n        info.importFn = imports[info.id];\n\n        if (info.type === \"solution\") {\n          exercises[info.number][info.type] = exercises[info.number][info.type] || [];\n          exercises[info.number][info.type].push(info);\n        } else {\n          exercises[info.number][info.type] = info;\n        }\n      }\n    } // create history and listen for changes\n    // use this for the 'isolated' version of the site, which is useful for dev tools debugging\n\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var history = (0, _history.createBrowserHistory)();\n  var previousLocation = history.location;\n  history.listen(handleLocationChange);\n  handleLocationChange(); // when location changes, either run in 'isolated' mode or render the workshop app\n\n  function handleLocationChange() {\n    var _fileInfo$find;\n\n    var location = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : history.location;\n    var pathname = location.pathname;\n    if (!pathname) return;\n    var file;\n\n    if (pathname !== null && pathname !== void 0 && pathname.startsWith(\"/isolated\")) {\n      // render isolated component\n      var filePath = pathname.replace(\"/isolated\", \"src\");\n      file = fileInfo.find(function (f) {\n        return f.filePath === filePath;\n      });\n\n      if (file) {\n        renderIsolated(file);\n      }\n    } else {\n      var number = Number(pathname.split(\"/\").slice(-1)[0]);\n      file = fileInfo.find(function (f) {\n        return f.type === \"readme\" && f.number === number;\n      });\n      renderReact();\n    } // set title\n    // setTimeout(() => {\n\n\n    var title = (_fileInfo$find = fileInfo.find(function (f) {\n      var _file;\n\n      return f.number === ((_file = file) === null || _file === void 0 ? void 0 : _file.number) && f.type === \"readme\";\n    })) === null || _fileInfo$find === void 0 ? void 0 : _fileInfo$find.title;\n\n    if (file && title) {\n      var newTitle = \"\".concat(file.number, \". \").concat(title);\n\n      if (document.title !== newTitle) {\n        document.title = newTitle;\n      }\n    } // }, 100);\n\n\n    previousLocation = location;\n  } // this is actually gonna render every exercise and solution (in an iframe or in the window)\n\n\n  function renderIsolated(file) {\n    if (history.location !== previousLocation) return;\n    file.importFn().then( /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(module) {\n        var component, domParser, newDocument, scripts, _iterator2, _step2, script, newScript, _iterator3, _step3, _script$getAttribute, attrName;\n\n        return _regenerator.default.wrap(function (_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (typeof module.default === \"function\") {\n                  // React component\n                  component = /*#__PURE__*/_react.default.createElement(module.default);\n                  render(component);\n                } else if (typeof module.default === \"string\") {\n                  // HTML file\n                  domParser = new DOMParser();\n                  newDocument = domParser.parseFromString(module.default, \"text/html\");\n                  document.documentElement.replaceWith(newDocument.documentElement); // scripts need to be added manually so they'll actually run\n\n                  scripts = document.querySelectorAll(\"script\");\n                  _iterator2 = _createForOfIteratorHelper(scripts);\n\n                  try {\n                    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                      script = _step2.value;\n                      newScript = document.createElement(\"script\");\n                      _iterator3 = _createForOfIteratorHelper(script.getAttributeNames());\n\n                      try {\n                        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                          attrName = _step3.value;\n                          // if (attrName === \"src\") {\n                          //   // resolve path from src\n                          //   const something = await import(\"../solution/temp/test.js\");\n                          // } else {\n                          // }\n                          newScript.setAttribute(attrName, (_script$getAttribute = script.getAttribute(attrName)) !== null && _script$getAttribute !== void 0 ? _script$getAttribute : \"\");\n                        }\n                      } catch (err) {\n                        _iterator3.e(err);\n                      } finally {\n                        _iterator3.f();\n                      }\n\n                      newScript.innerHTML = script.innerHTML;\n                      script.parentNode.insertBefore(newScript, script);\n                      script.remove();\n                    }\n                  } catch (err) {\n                    _iterator2.e(err);\n                  } finally {\n                    _iterator2.f();\n                  }\n                }\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function () {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  }\n\n  function render(ui) {\n    var root = document.getElementById(\"root\");\n\n    _reactDom.default.unmountComponentAtNode(root);\n\n    _reactDom.default.render(ui, root);\n  }\n\n  function renderReact() {\n    if (document.documentElement !== originalDocumentElement) {\n      document.documentElement.replaceWith(originalDocumentElement);\n    }\n\n    _reactDom.default.render( /*#__PURE__*/_react.default.createElement(_app.default, {\n      exercises: exercises,\n      projectTitle: projectTitle\n    }), document.getElementById(\"root\"));\n  }\n}"]},"metadata":{},"sourceType":"script"}